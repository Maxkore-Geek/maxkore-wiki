# JavaScript 基础语法

## 一、变量声明

### var, let, const 的区别
```javascript
// var - 旧方式，函数作用域
var name = "Maxkore";
var name = "New Name"; // 可以重复声明

// let - 现代方式，块作用域
let age = 18;
age = 19; // 可以修改

// const - 常量，块作用域，不可修改
const PI = 3.14159;
// PI = 3.14; // 错误！不能修改
```

### 作用域
```javascript
// 全局作用域
var globalVar = "全局";

function test() {
    // 函数作用域
    var functionVar = "函数内";
    
    if (true) {
        // 块作用域
        let blockVar = "块内";
        const blockConst = "块常量";
        console.log(blockVar); // 可以访问
    }
    // console.log(blockVar); // 错误！不能访问
}
```

## 二、数据类型

### 基本类型
```javascript
// 字符串
let str = "Hello";
let str2 = 'World';
let str3 = `Template ${str}`;

// 数字
let num = 100;
let float = 3.14;
let hex = 0xFF;  // 十六进制

// 布尔值
let isTrue = true;
let isFalse = false;

// undefined - 未定义
let notDefined;

// null - 空值
let empty = null;

// Symbol - 唯一值
let sym = Symbol("id");
```

### 类型检查
```javascript
console.log(typeof "hello");  // string
console.log(typeof 123);      // number
console.log(typeof true);     // boolean
console.log(typeof undefined); // undefined
console.log(typeof null);      // object (历史遗留问题)
console.log(typeof {});        // object
console.log(typeof []);        // object
console.log(Array.isArray([])); // true - 检查数组
```

## 三、运算符

### 算术运算符
```javascript
let a = 10, b = 3;
console.log(a + b);  // 13
console.log(a - b);  // 7
console.log(a * b);  // 30
console.log(a / b);  // 3.333...
console.log(a % b);  // 1 (取余)
console.log(a ** b); // 1000 (幂运算)
```

### 比较运算符
```javascript
console.log(5 == "5");   // true (值相等)
console.log(5 === "5");  // false (值和类型都相等)
console.log(5 != "5");   // false
console.log(5 !== "5");  // true
console.log(5 > 3);      // true
console.log(5 >= 5);     // true
```

### 逻辑运算符
```javascript
let x = true, y = false;
console.log(x && y);  // false (AND)
console.log(x || y);  // true  (OR)
console.log(!x);      // false (NOT)

// 短路求值
let name = "Maxkore";
let displayName = name || "Anonymous";  // 如果 name 存在，使用 name

// 空值合并
let value = null;
let result = value ?? "默认值";  // 如果 value 是 null/undefined，使用默认值
```

## 四、控制流程

### if 语句
```javascript
let score = 85;

if (score >= 90) {
    console.log("优秀");
} else if (score >= 60) {
    console.log("及格");
} else {
    console.log("不及格");
}
```

### switch 语句
```javascript
let day = 3;
switch (day) {
    case 1:
        console.log("周一");
        break;
    case 2:
        console.log("周二");
        break;
    case 3:
        console.log("周三");
        break;
    default:
        console.log("其他");
}
```

### 循环
```javascript
// for 循环
for (let i = 0; i < 5; i++) {
    console.log(i);
}

// while 循环
let i = 0;
while (i < 5) {
    console.log(i);
    i++;
}

// do...while 循环
let j = 0;
do {
    console.log(j);
    j++;
} while (j < 5);

// for...in (遍历对象属性)
let person = {name: "Maxkore", age: 18};
for (let key in person) {
    console.log(key, person[key]);
}

// for...of (遍历可迭代对象)
let arr = [1, 2, 3, 4, 5];
for (let value of arr) {
    console.log(value);
}
```

## 五、函数

### 函数定义
```javascript
// 函数声明
function greet(name) {
    return `Hello, ${name}!`;
}

// 函数表达式
const add = function(a, b) {
    return a + b;
};

// 箭头函数
const multiply = (a, b) => a * b;

// 箭头函数（多行）
const calculate = (a, b) => {
    let sum = a + b;
    let product = a * b;
    return { sum, product };
};
```

### 参数处理
```javascript
// 默认参数
function sayHello(name = "Guest") {
    return `Hello, ${name}!`;
}

// 剩余参数
function sum(...numbers) {
    return numbers.reduce((total, num) => total + num, 0);
}

// 解构参数
function printPerson({name, age, city = "Unknown"}) {
    console.log(`${name} is ${age} years old, from ${city}`);
}

printPerson({name: "Maxkore", age: 18});

// 回调函数
function processData(data, callback) {
    let result = data.toUpperCase();
    callback(result);
}

processData("hello", (result) => {
    console.log(result);  // HELLO
});
```

## 六、数组操作

### 基本操作
```javascript
let fruits = ["apple", "banana", "orange"];

// 添加/删除元素
fruits.push("grape");      // 末尾添加
fruits.pop();              // 末尾删除
fruits.unshift("mango");   // 开头添加
fruits.shift();            // 开头删除

// 查找元素
console.log(fruits.indexOf("banana"));  // 索引
console.log(fruits.includes("apple"));  // 是否包含

// 切片和拼接
let sliced = fruits.slice(1, 3);        // 切片
let combined = fruits.concat(["pear"]);  // 拼接
```

### 高级数组方法
```javascript
let numbers = [1, 2, 3, 4, 5];

// map - 映射
let doubled = numbers.map(n => n * 2);  // [2, 4, 6, 8, 10]

// filter - 过滤
let evens = numbers.filter(n => n % 2 === 0);  // [2, 4]

// reduce - 归约
let sum = numbers.reduce((acc, curr) => acc + curr, 0);  // 15

// forEach - 遍历
numbers.forEach(n => console.log(n));

// some/every - 判断
let hasEven = numbers.some(n => n % 2 === 0);  // true
let allPositive = numbers.every(n => n > 0);   // true

// find/findIndex - 查找
let firstEven = numbers.find(n => n % 2 === 0);  // 2
let firstEvenIndex = numbers.findIndex(n => n % 2 === 0);  // 1

// sort - 排序
let sorted = [...numbers].sort((a, b) => b - a);  // 降序
```

## 七、对象操作

```javascript
// 创建对象
let person = {
    name: "Maxkore",
    age: 18,
    skills: ["JavaScript", "Python"],
    
    // 方法
    greet() {
        return `Hello, I'm ${this.name}`;
    },
    
    // getter/setter
    get info() {
        return `${this.name} (${this.age})`;
    },
    
    set info(value) {
        [this.name, this.age] = value.split(" ");
    }
};

// 访问属性
console.log(person.name);        // 点表示法
console.log(person["age"]);      // 方括号表示法

// 添加/删除属性
person.city = "Beijing";
delete person.skills;

// 对象方法
let keys = Object.keys(person);      // 获取所有键
let values = Object.values(person);  // 获取所有值
let entries = Object.entries(person); // 获取键值对

// 对象合并
let clone = Object.assign({}, person);
let merged = {...person, ...{job: "Developer"}};
```

## 八、类和面向对象

```javascript
// ES6 类
class Animal {
    constructor(name) {
        this.name = name;
    }
    
    speak() {
        console.log(`${this.name} makes a sound`);
    }
    
    static info() {
        return "This is an animal class";
    }
}

// 继承
class Dog extends Animal {
    constructor(name, breed) {
        super(name);  // 调用父类构造函数
        this.breed = breed;
    }
    
    speak() {
        console.log(`${this.name} barks`);
    }
}

let dog = new Dog("Buddy", "Golden Retriever");
dog.speak();
```

## 九、异步编程

### Promise
```javascript
// 创建 Promise
function fetchData() {
    return new Promise((resolve, reject) => {
        setTimeout(() => {
            let success = true;
            if (success) {
                resolve({id: 1, name: "Data"});
            } else {
                reject("Error fetching data");
            }
        }, 1000);
    });
}

// 使用 Promise
fetchData()
    .then(data => console.log(data))
    .catch(error => console.error(error))
    .finally(() => console.log("完成"));
```

### async/await
```javascript
async function getData() {
    try {
        let data = await fetchData();
        console.log(data);
        return data;
    } catch (error) {
        console.error(error);
    }
}

// 并发请求
async function getMultipleData() {
    let [data1, data2] = await Promise.all([
        fetchData(1),
        fetchData(2)
    ]);
    return {data1, data2};
}
```

## 十、ES6+ 新特性

### 解构赋值
```javascript
// 数组解构
let [a, b, ...rest] = [1, 2, 3, 4, 5];

// 对象解构
let {name, age, city = "Unknown"} = person;

// 函数参数解构
function process({x, y}) {
    return x + y;
}
```

### 模板字符串
```javascript
let name = "Maxkore";
let age = 18;
let message = `Hello, ${name}! You are ${age} years old.`;
```

### 展开运算符
```javascript
let arr1 = [1, 2, 3];
let arr2 = [4, 5, 6];
let combined = [...arr1, ...arr2];

let obj1 = {a: 1, b: 2};
let obj2 = {c: 3, d: 4};
let mergedObj = {...obj1, ...obj2};
```

### 可选链
```javascript
let user = {};
let city = user?.address?.city ?? "Unknown";  // 安全访问，有默认值
```

### 模块化
```javascript
// 导出
export const PI = 3.14159;
export function add(a, b) { return a + b; }
export default class Calculator { }

// 导入
import Calculator, { PI, add } from './math.js';
```